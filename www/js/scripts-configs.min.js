/*1
 * moOde audio player (C) 2014 Tim Curtis
 * http://moodeaudio.org
 *
 * tsunamp player ui (C) 2013 Andrea Coiutti & Simone De Gregori
 * http://www.tsunamp.com
 *
 * This Program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3, or (at your option)
 * any later version.
 *
 * This Program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * 2020-05-03 TC moOde 6.5.2
 *
 */
jQuery(document).ready(function(e){"use strict";GLOBAL.scriptSection="configs",e("#config-back").show(),e("#config-tabs").css("display","flex"),e("#menu-bottom").css("display","none"),e("#configure .row2-btns").hide(),e("meta[name=viewport]").attr("content","height="+e(window).height()+", width="+e(window).width()+", initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"),e.post("command/moode.php?cmd=updcfgsystem",{library_pixelratio:window.devicePixelRatio}),e.getJSON("command/moode.php?cmd=read_cfgs_no_radio",function(t){SESSION.json=t.cfg_system,THEME.json=t.cfg_theme,NETWORK.json=t.cfg_network,UI.mobile=e(window).width()<480,setFontSize();var n=themeOp;.74902==themeOp&&(n=.1),themeColor=str2hex(THEME.json[SESSION.json.themename].tx_color),themeBack="rgba("+THEME.json[SESSION.json.themename].bg_color+","+SESSION.json.alphablend+")",themeMcolor=str2hex(THEME.json[SESSION.json.themename].tx_color),tempcolor=splitColor(e(".dropdown-menu").css("background-color")),themeOp=tempcolor[3],themeMback="rgba("+THEME.json[SESSION.json.themename].bg_color+","+themeOp+")",accentColor=themeToColors(SESSION.json.accent_color),document.body.style.setProperty("--themetext",themeMcolor);var o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30'><circle fill='%23"+accentColor.substr(1)+"' cx='14' cy='14.5' r='11.5'/></svg>",s=getCSSRule(".toggle .toggle-radio");s.style.backgroundImage='url("'+o+'")',document.body.style.setProperty("--config_modal_btn_bg","rgba(64,64,64,0.75)"),e(".modal-footer .btn").css("background-color","rgba(128,128,128,.35)"),e(".lib-config").length?e("#lib-config-btn").addClass("active"):e(".snd-config").length?e("#snd-config-btn").addClass("active"):e(".net-config").length?e("#net-config-btn").addClass("active"):e(".sys-config").length&&e("#sys-config-btn").addClass("active"),e.pnotify.defaults.history=!1,engineMpdLite(),engineCmdLite(),1==GLOBAL.thmUpdInitiated&&e(".busy-spinner").show()}),e("#config-back a").click(function(){"/index.php"==e(this).attr("href")&&e("#config-tabs").hide()}),e(".btn-submit").click(function(){e(".busy-spinner").show()}),e("#eqp-curve-name").change(function(){location.assign("http://"+location.host+"/eqp-config.php?curve="+e(this).val())}),e("#eqg-curve-name").change(function(){location.assign("http://"+location.host+"/eqg-config.php?curve="+e(this).val())}),e("#master-gain-up, #master-gain-dn").on("mousedown mouseup click",function(t){if("mousedown"==t.type){var n=e(this).attr("id");eqGainUpdInterval=setInterval(function(){updEqpMasterGainSlider(n)},50)}else"mouseup"==t.type?clearInterval(eqGainUpdInterval):"click"==t.type&&updEqpMasterGainSlider(e(this).attr("id"))}),e("#new-curvename").on("shown.bs.modal",function(){e("#new-curvename-input").focus()}),e("#eth0-method").length&&"static"==e("#eth0-method").val()&&e("#eth0-static").show(),e("#wlan0-method").length&&"static"==e("#wlan0-method").val()&&e("#wlan0-static").show(),e("#eth0-method").change(function(){"static"==e(this).val()?e("#eth0-static").show():e("#eth0-static").hide()}),e("#wlan0-method").change(function(){"static"==e(this).val()?""!=e("#wlan0ssid").val()&&"None (activates AP mode)"!=e("#wlan0ssid").val()?e("#wlan0-static").show():notify("needssid"):e("#wlan0-static").hide()}),e("#manual-ssid").on("shown.bs.modal",function(){e("#wlan0otherssid").focus()}),e("#wlan0ssid").change(function(){e("#wlan0ssid").val()==NETWORK.json.wlan0.wlanssid?e("#wlan0pwd").val(NETWORK.json.wlan0.wlan_psk):e("#wlan0pwd").val(""),"static"==e("#wlan0-method").val()&&(""==e(this).val()||"None (activates AP mode)"==e(this).val()?(e("#wlan0-static").hide(),notify("needdhcp")):e("#wlan0-static").show())}),e("#apdssid").on("input",function(){e("#apdssid").val()==NETWORK.json.apd0.wlanssid?e("#apdpwd").val(NETWORK.json.apd0.wlan_psk):e("#apdpwd").val("")}),e(".show-hide-password").click(function(){var t=document.getElementById(e(this).data("id"));""!=e("#"+e(this).data("id")).val()&&("password"==t.type?t.type="text":t.type="password")}),e("#type").length&&e("#mounttype").val(e("#type").val()),e("#type").change(function(){e("#mounttype").val(e(this).val()),"cifs"==e(this).val()?(e("#userid-password").show(),e("#options").val("vers=1.0,sec=ntlm,ro,dir_mode=0777,file_mode=0777"),e("#info-mount-flags").html("vers=2.0 or 3.0 may be needed and/or sec=ntlm removed depending on what the NAS requires."),e("#scan-btn").show(),e("#edit-server").show(),e("#advanced-options").show()):"nfs"==e(this).val()?(e("#userid-password").hide(),e("#options").val("ro,nolock"),e("#info-mount-flags").html("vers=1.0 or higher may be needed depending on what the NAS requires."),e("#scan-btn").hide(),e("#edit-server").show(),e("#advanced-options").show()):"upnp"==e(this).val()&&(e("#userid-password").hide(),e("#scan-btn").show(),e("#edit-server").hide(),e("#advanced-options").hide())}),e("#manual-server").on("shown.bs.modal",function(){e("#manualserver").focus()}),e("#editserver").click(function(){e("#manualserver").val(e("#address").val().trim())}),e("#view-thmcache-status").click(function(){e.getJSON("command/moode.php?cmd=thmcachestatus",function(t){e("#thmcache-status").html(t)})}),e(".info-toggle").click(function(){var t="#"+e(this).data("cmd");e(t).hasClass("hide")?e(t).removeClass("hide"):e(t).addClass("hide")})});
